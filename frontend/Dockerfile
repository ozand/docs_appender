# Используем официальный образ Python с slim-версией
FROM python:3.11-slim

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем файлы зависимостей
COPY pyproject.toml uv.lock* ./

# Устанавливаем uv и зависимости
RUN pip install uv && uv sync --frozen

# Копируем остальные файлы приложения
COPY . .

# Открываем порт, который будет использовать приложение
EXPOSE 8501

# Команда для запуска приложения
# server.address=0.0.0.0 позволяет получить доступ к приложению снаружи контейнера
# server.enableCORS=false может быть нужно для корректной работы в контейнере
CMD ["uv", "run", "streamlit", "run", "app.py", "--server.address=0.0.0.0", "--server.port=8501"]